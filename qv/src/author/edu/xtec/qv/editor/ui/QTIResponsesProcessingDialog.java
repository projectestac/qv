/*
 * QTIResponsesProcessingDialog.java
 *
 * Created on 7 de octubre de 2002, 18:40
 */

package edu.xtec.qv.editor.ui;

import edu.xtec.qv.qti.QTICondition;
import edu.xtec.qv.qti.QTIConditionResult;
import edu.xtec.qv.qti.QTIItemResponseProcessing;
import edu.xtec.qv.qti.util.CreatorProperties;
import edu.xtec.util.Messages;

/**
 *
 * @author  Albert
 * @version
 */
public class QTIResponsesProcessingDialog extends javax.swing.JDialog implements ExtendedRenderer{
    
    protected QTIItemResponseProcessing qtiItemRespProc;
    protected QTICondition qtiCond;
    //protected creator.QTIFeedback qtiFeed;
    protected QTIConditionResult qtiCondRes;
    
    /** Creates new form QTIResponsesProcessingDialog */
    public QTIResponsesProcessingDialog(java.awt.Frame parent, boolean modal, QTIItemResponseProcessing qtiItemRespProc) {
        super(parent, Messages.getLocalizedString("ItemPossibleEvaluation"),modal);
        //, creator.QTICondition qtiCond, creator.QTIFeedback qtiFeed
        this.qtiItemRespProc=qtiItemRespProc;
        this.qtiCond=qtiItemRespProc.getCondition();
        //this.qtiFeed=qtiItemRespProc.getFeedback();
        this.qtiCondRes=qtiItemRespProc.getConditionResult();
        //qtiCond.setIdents(qtiItemRespProc.getIdents());
        initComponents();
        initComponents2();
        if (CreatorProperties.getBackground()!=null || CreatorProperties.getComponentColor()!=null) setBackground(CreatorProperties.getBackground());
        initMessages();
        setSize(460,470);
        ////pack ();
        //setVisible(true);
        show();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the FormEditor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        java.awt.GridBagConstraints gridBagConstraints;

        jPanel1 = new javax.swing.JPanel();
        btOk = new javax.swing.JButton();
        btCancel = new javax.swing.JButton();
        jpCenter = new javax.swing.JPanel();
        spConditionPanel = new javax.swing.JScrollPane();
        spFeedbackPanel = new javax.swing.JScrollPane();

        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                closeDialog(evt);
            }
        });

        btOk.setText("Acceptar");
        btOk.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btOkActionPerformed(evt);
            }
        });

        jPanel1.add(btOk);

        btCancel.setText("Cancelar");
        btCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btCancelActionPerformed(evt);
            }
        });

        jPanel1.add(btCancel);

        getContentPane().add(jPanel1, java.awt.BorderLayout.SOUTH);

        jpCenter.setLayout(new java.awt.GridBagLayout());

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 0.7;
        jpCenter.add(spConditionPanel, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 0.3;
        jpCenter.add(spFeedbackPanel, gridBagConstraints);

        getContentPane().add(jpCenter, java.awt.BorderLayout.CENTER);

    }//GEN-END:initComponents
    
  private void btCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btCancelActionPerformed
      // Add your handling code here:
      setVisible(false);
      dispose();
  }//GEN-LAST:event_btCancelActionPerformed
  
  private void btOkActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btOkActionPerformed
      // Add your handling code here:
      setVisible(false);
      qtiItemRespProc.doOk();
      dispose();
  }//GEN-LAST:event_btOkActionPerformed
  
  private void initComponents2(){
      //spConditionPanel.setViewportView(qtiCond.getPanel());
      spConditionPanel.setViewportView(qtiItemRespProc.getPanel());
      //spConditionPanel.setBorder(null);//
      spConditionPanel.setBorder(new javax.swing.border.TitledBorder(Messages.getLocalizedString("Conditions")));
      spConditionPanel.setToolTipText(Messages.getLocalizedString("ConditionsDesc"));
      spFeedbackPanel.setViewportView(qtiCondRes.getPanel());
      spFeedbackPanel.setToolTipText(Messages.getLocalizedString("FeedbackDesc"));
      spFeedbackPanel.setBorder(null);//
  }
  
  /** Closes the dialog */
    private void closeDialog(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_closeDialog
        //setVisible (false);
        //dispose ();
    }//GEN-LAST:event_closeDialog
    
    protected void initMessages(){
        btOk.setText(Messages.getLocalizedString("Accept"));
        btCancel.setText(Messages.getLocalizedString("Cancel"));
    }
    
    public void setBackground(java.awt.Color c){
        super.setBackground(c);
        if (spFeedbackPanel!=null) spFeedbackPanel.setBackground(c);
        if (spConditionPanel!=null) spConditionPanel.setBackground(c);
        if (jpCenter!=null) jpCenter.setBackground(c);
        if (jPanel1!=null) jPanel1.setBackground(c);
        java.awt.Color componentColor=CreatorProperties.getComponentColor();
        if (componentColor!=null){
            if (btCancel!=null) btCancel.setBackground(componentColor);
            if (btOk!=null) btOk.setBackground(componentColor);
        }
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JScrollPane spFeedbackPanel;
    private javax.swing.JScrollPane spConditionPanel;
    private javax.swing.JButton btCancel;
    private javax.swing.JPanel jpCenter;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JButton btOk;
    // End of variables declaration//GEN-END:variables
    
}